# Example Schedule with Realistic Parametrized Tasks
# Task 1: Data Analyzer - Analizza dati e calcola statistiche
# Task 2: Image Processor - Elabora immagini con filtri
# Task 3: Report Generator - Genera report completo dai risultati di Task 1

schedule:
  name: "Realistic Data Processing Pipeline"
  description: "Data analysis, image processing, and report generation with dependencies"
  
  # Global defaults (optional)
  defaults:
    deadline_us: 30000000  # 30 seconds (tasks are more complex now)
    
  # Task definitions
  tasks:
    # Task 1: Data Analyzer - Sequential execution
    # Analizza 500k data points e calcola statistiche (media, min, max, std dev)
    # Output: statistiche che verranno usate da Task 3
    - id: task_1
      address: "task1:50051"
      mode: timed
      scheduled_time_us: 5000000
      deadline_us: 10000000              # 10 seconds (real: ~4s)
      estimated_duration_us: 4100000     # ~4 seconds
      rt_policy: "fifo"                  # SCHED_FIFO
      rt_priority: 30                    # Lower RT priority
      cpu_affinity: 1                    # CPU core 0
      parameters:
        data_size: 500000                # 500k data points to analyze
      
    # Task 2: Image Processor - Timed execution at 2 seconds
    # Elabora immagine 800x600 con filtri Gaussian e edge detection
    # Esecuzione indipendente dagli altri task
    - id: task_2
      address: "task2:50052"
      mode: timed
      scheduled_time_us: 90000000         # Start at 2 seconds
      deadline_us: 8000000               # 8 seconds (real: ~3.2s)
      estimated_duration_us: 3300000     # ~3.2 seconds
      rt_policy: "fifo"                  # SCHED_FIFO
      rt_priority: 30                    # Lower RT priority
      cpu_affinity: 1                    # CPU core 1
      parameters:
        image_width: 800
        image_height: 600
        filter: "gaussian"
      
    # Task 3: Report Generator - Sequential, depends on task_1
    # Prende i risultati di Task 1 e genera un report completo
    # Include analisi ML, aggregazioni temporali, e visualizzazioni
    - id: task_3
      address: "task3:50053"
      mode: sequential
      scheduled_time_us: 0
      deadline_us: 20000000              # 20 seconds (real: ~16s)
      estimated_duration_us: 17000000    # ~16 seconds (very heavy)
      rt_policy: "fifo"                  # SCHED_FIFO
      rt_priority: 30                    # Lower RT priority
      cpu_affinity: 1                   # CPU core 2
      depends_on: task_1                 # Needs Task 1 output
      parameters:
        report_depth: 5                  # Number of charts to generate
